{"version":3,"file":null,"sources":["tmp/src/util/is.js","tmp/src/vdom/vnode.js","tmp/src/vdom/h.js","tmp/spec/hyperscript_spec.js","tmp/src/vdom/dom.js","tmp/src/vdom/render.js","tmp/spec/vdom_spec.js"],"sourcesContent":["export let isArray = Array.isArray;\r\nexport let isPrimitive = function (x) {\r\n    return typeof x === 'string' || typeof x === 'number';\r\n};\r\n//# sourceMappingURL=is.js.map","import { isArray } from '../util/is';\r\nexport class Vnode {\r\n    constructor(tag, key, data, children, text, dom) {\r\n        this.tag = tag;\r\n        this.key = key;\r\n        this.data = data;\r\n        this.children = children;\r\n        this.text = text;\r\n        this.dom = dom;\r\n        this.domSize = undefined;\r\n        this.events = undefined;\r\n        this.tagger = undefined;\r\n        this.skip = undefined;\r\n        this.node = undefined;\r\n    }\r\n    static normalize(node) {\r\n        if (isArray(node)) {\r\n            return new Vnode('[', undefined, undefined, node, undefined, undefined);\r\n        }\r\n        else if (typeof node === 'string') {\r\n            return Vnode.createTextVNode(node);\r\n        }\r\n        return node;\r\n    }\r\n    static normalizeChildren(children) {\r\n        let item;\r\n        let normalized = [];\r\n        for (let i = 0; i < children.length; i++) {\r\n            item = children[i];\r\n            if (typeof item === 'boolean' || item == null) {\r\n                continue;\r\n            }\r\n            if (typeof item === 'number' || typeof item === 'string') {\r\n                item = String(item);\r\n                normalized[i] = Vnode.normalize(item);\r\n            }\r\n            else {\r\n                normalized[i] = Vnode.normalize(item);\r\n            }\r\n        }\r\n        return normalized;\r\n    }\r\n    map(tagger) {\r\n        let vnode = new Vnode(undefined, undefined, undefined, [this], undefined, undefined);\r\n        vnode.tagger = tagger;\r\n        return vnode;\r\n    }\r\n    static createTextVNode(text) {\r\n        return new Vnode('#', undefined, undefined, text, undefined, undefined);\r\n    }\r\n}\r\n//# sourceMappingURL=vnode.js.map","import { Vnode } from './vnode';\r\nimport { isPrimitive } from '../util/is';\r\nexport const h = function (tag, b, c) {\r\n    let data = {};\r\n    let children;\r\n    let childlist;\r\n    let text;\r\n    if (arguments.length === 3) {\r\n        data = b;\r\n        if (Array.isArray(c)) {\r\n            children = c;\r\n        }\r\n        else if (isPrimitive(c)) {\r\n            children = [c];\r\n        }\r\n        else {\r\n            data = b;\r\n        }\r\n    }\r\n    else if (arguments.length === 2) {\r\n        if (Array.isArray(b)) {\r\n            children = b;\r\n        }\r\n        else if (isPrimitive(b)) {\r\n            children = [b];\r\n        }\r\n        else {\r\n            data = b;\r\n        }\r\n    }\r\n    if (Array.isArray(children)) {\r\n        childlist = Vnode.normalizeChildren(children);\r\n    }\r\n    if (Array.isArray(childlist) && childlist.length === 1 && childlist[0] != null) {\r\n        let textNode = childlist[0];\r\n        if (textNode instanceof Vnode && textNode.tag === '#' && typeof textNode.children === 'string') {\r\n            text = textNode.children;\r\n            childlist = undefined;\r\n        }\r\n    }\r\n    let hashIdx = tag.indexOf('#');\r\n    let dotIdx = tag.indexOf('.', hashIdx);\r\n    let hash = hashIdx > 0 ? hashIdx : tag.length;\r\n    let dot = dotIdx > 0 ? dotIdx : tag.length;\r\n    let sel = hashIdx !== -1 || dotIdx !== -1 ? tag.slice(0, Math.min(hash, dot)) : tag;\r\n    let className = data.class || data.className;\r\n    if (dotIdx > 0 && className === undefined) {\r\n        data.className = tag.slice(dot + 1).replace(/\\./g, ' ');\r\n    }\r\n    if (hash < dot) {\r\n        data.id = tag.slice(hash + 1, dot);\r\n    }\r\n    if (className !== undefined) {\r\n        if (data.class !== 'undefined') {\r\n            data.class = undefined;\r\n            data.className = className;\r\n        }\r\n        if (dotIdx > 0) {\r\n            data.className = tag.slice(dot + 1).replace(/\\./g, ' ') + className;\r\n        }\r\n    }\r\n    return new Vnode(sel, data && data.key, data, childlist, text, undefined);\r\n};\r\n//# sourceMappingURL=h.js.map","import { h } from '../src/vdom/h';\r\nfunction getChild(vnode, index) {\r\n    if (typeof vnode === 'string') {\r\n        return h('div#error');\r\n    }\r\n    return vnode\r\n        && vnode.children\r\n        && vnode.children.length >= index + 1\r\n        && vnode.children[index]\r\n        || h('div#error');\r\n}\r\ndescribe('hyperscript', () => {\r\n    describe('selector', () => {\r\n        it('can create vnode with proper tag', () => {\r\n            let vnode = h('button');\r\n            expect(vnode.tag).toEqual('button');\r\n        });\r\n        it('can create vnode with class in selector', () => {\r\n            let vnode = h('button.primary');\r\n            expect(vnode.tag).toEqual('button');\r\n            expect(vnode.data.className).toEqual('primary');\r\n        });\r\n        it('can create vnode with many classes in selector', () => {\r\n            let vnode = h('button.primary.button.hello');\r\n            expect(vnode.tag).toEqual('button');\r\n            expect(vnode.data.className).toEqual('primary button hello');\r\n        });\r\n        it('can create vnode with id in selector', () => {\r\n            let vnode = h('button#btn');\r\n            expect(vnode.tag).toEqual('button');\r\n            expect(vnode.data.id).toEqual('btn');\r\n        });\r\n        it('can create vnode with mixed selector', () => {\r\n            let vnode = h('button#btn.primary');\r\n            expect(vnode.tag).toEqual('button');\r\n            expect(vnode.data.id).toEqual('btn');\r\n            expect(vnode.data.className).toEqual('primary');\r\n        });\r\n    });\r\n    describe('vnode data', () => {\r\n        it('handles falsy string data', () => {\r\n            let vnode = h('div', { className: '' });\r\n            expect(vnode.data.className).toEqual('');\r\n        });\r\n        it('handle boolean data', () => {\r\n            let vnode = h('input', { readonly: true });\r\n            expect(vnode.data.readonly).toEqual(true);\r\n        });\r\n        it('handle key in vnode data', () => {\r\n            let vnode = h('li', { key: 1 });\r\n            expect(vnode.key).toEqual(1);\r\n            expect(vnode.tag).toEqual('li');\r\n        });\r\n    });\r\n    describe('children', () => {\r\n        it('can create vnode with children', () => {\r\n            let vnode = h('div', [h('span#hello'), h('b.world')]);\r\n            expect(vnode.tag).toEqual('div');\r\n            expect(getChild(vnode, 0).tag).toEqual('span');\r\n            expect(getChild(vnode, 1).tag).toEqual('b');\r\n        });\r\n        it('handle single string children', () => {\r\n            let vnode = h('div', ['foo']);\r\n            expect(vnode.text).toEqual('foo');\r\n        });\r\n        it('handle single numeric children', () => {\r\n            let vnode = h('div', 1);\r\n            expect(vnode.text).toEqual('1');\r\n        });\r\n        it('handle vnode with props and text content in string', () => {\r\n            let vnode = h('div', {}, 'hello');\r\n            expect(vnode.text).toEqual('hello');\r\n        });\r\n    });\r\n});\r\n//# sourceMappingURL=hyperscript_spec.js.map","export function createDocumentFragment() {\r\n    return document.createDocumentFragment();\r\n}\r\nexport function createTextNode(text) {\r\n    return document.createTextNode(text);\r\n}\r\nexport function createElement(tag) {\r\n    return document.createElement(tag);\r\n}\r\nexport function createElementNS(namespaceURI, qualifiedName) {\r\n    return document.createElementNS(namespaceURI, qualifiedName);\r\n}\r\nexport function activeElement() {\r\n    return document.activeElement;\r\n}\r\n//# sourceMappingURL=dom.js.map","import { Vnode } from './vnode';\r\nimport * as DOM from './dom';\r\nfunction createNodes(parent, vnodes, start, end, eventNode, nextSibling, ns) {\r\n    let vnode;\r\n    for (let i = start; i < end; i++) {\r\n        vnode = vnodes[i];\r\n        if (vnode != null) {\r\n            insertNode(parent, createNode(vnode, eventNode, ns), nextSibling);\r\n        }\r\n    }\r\n}\r\nfunction createNode(vnode, eventNode, ns) {\r\n    let tag = vnode.tag;\r\n    if (typeof tag === 'string') {\r\n        switch (tag) {\r\n            case '#': return createText(vnode);\r\n            case '<': return createHTML(vnode);\r\n            case '[': return createFragment(vnode, eventNode, ns);\r\n            default:\r\n                return createElement(vnode, eventNode, ns);\r\n        }\r\n    }\r\n    if (vnode.data != null && typeof vnode.data.fn === 'function') {\r\n        return createThunk(vnode, eventNode, ns);\r\n    }\r\n    if (typeof vnode.tagger === 'function') {\r\n        return createTagger(vnode, eventNode, ns);\r\n    }\r\n    throw new Error('invalid virtual node received');\r\n}\r\nfunction createText(vnode) {\r\n    return vnode.dom = DOM.createTextNode(vnode.children);\r\n}\r\nfunction createHTML(vnode) {\r\n    if (typeof vnode.children === 'string') {\r\n        let match = vnode.children.match(/^\\s*?<(\\w+)/im) || [];\r\n        let table = {\r\n            caption: 'table',\r\n            thead: 'table',\r\n            tbody: 'table',\r\n            tfoot: 'table',\r\n            tr: 'tbody',\r\n            th: 'tr',\r\n            td: 'tr',\r\n            colgroup: 'table',\r\n            col: 'colgroup'\r\n        };\r\n        let parent = table[match[1]] || 'div';\r\n        let temp = DOM.createElement(String(parent));\r\n        temp.innerHTML = vnode.children;\r\n        vnode.dom = temp.firstChild;\r\n        vnode.domSize = temp.childNodes.length;\r\n        let fragment = DOM.createDocumentFragment();\r\n        let child;\r\n        while (child = temp.firstChild) {\r\n            fragment.appendChild(child);\r\n        }\r\n        return fragment;\r\n    }\r\n    throw new Error('trying to create vnode HTML with invalid vnode type');\r\n}\r\nfunction createFragment(vnode, eventNode, ns) {\r\n    let fragment = DOM.createDocumentFragment();\r\n    if (vnode.children != null && Array.isArray(vnode.children)) {\r\n        let children = vnode.children;\r\n        createNodes(fragment, children, 0, children.length, eventNode, null, ns);\r\n    }\r\n    vnode.dom = fragment.firstChild;\r\n    vnode.domSize = fragment.childNodes.length;\r\n    return fragment;\r\n}\r\nfunction createElement(vnode, eventNode, ns) {\r\n    let tag = vnode.tag;\r\n    let data = vnode.data;\r\n    switch (tag) {\r\n        case 'svg':\r\n            ns = 'http://www.w3.org/2000/svg';\r\n            break;\r\n        case 'math':\r\n            ns = 'http://www.w3.org/1998/Math/MathML';\r\n            break;\r\n    }\r\n    let element = ns ? DOM.createElementNS(ns, tag) : DOM.createElement(tag);\r\n    vnode.dom = element;\r\n    if (data != null) {\r\n        setAttrs(vnode, eventNode, data, ns);\r\n    }\r\n    if (vnode.text != null) {\r\n        if (vnode.text !== '')\r\n            element.textContent = vnode.text;\r\n        else\r\n            vnode.children = [new Vnode('#', undefined, undefined, vnode.text, undefined, undefined)];\r\n    }\r\n    if (vnode.children != null) {\r\n        let children = vnode.children;\r\n        createNodes(element, children, 0, children.length, eventNode, null, ns);\r\n        setLateAttrs(vnode, eventNode);\r\n    }\r\n    return element;\r\n}\r\nfunction createThunk(thunk, eventNode, ns) {\r\n    let data = thunk.data;\r\n    let vnode = Vnode.normalize(data.fn());\r\n    let elm = createNode(vnode, eventNode, ns);\r\n    thunk.node = vnode;\r\n    thunk.dom = vnode.dom;\r\n    thunk.domSize = vnode.domSize;\r\n    return elm;\r\n}\r\nfunction createTagger(vnode, eventNode, ns) {\r\n    if (Array.isArray(vnode.children)) {\r\n        let { tagger, children } = getVnodeTagger(vnode);\r\n        let subNode = {\r\n            tagger: tagger,\r\n            parent: eventNode\r\n        };\r\n        children = Vnode.normalize(children);\r\n        let elm = createNode(children, subNode, ns);\r\n        vnode.node = children;\r\n        vnode.dom = children.dom;\r\n        vnode.domSize = children.domSize;\r\n        return elm;\r\n    }\r\n    throw new Error('invalid vnode tagger given');\r\n}\r\nfunction vnodeHasKey(vnode) {\r\n    return vnode != null && vnode.key != null;\r\n}\r\nfunction updateNodes(parent, old, vnodes, eventNode, nextSibling, ns) {\r\n    if (old === vnodes || old == null && vnodes == null)\r\n        return;\r\n    else if (old == null && Array.isArray(vnodes))\r\n        createNodes(parent, vnodes, 0, vnodes.length, eventNode, nextSibling, undefined);\r\n    else if (vnodes == null && Array.isArray(old))\r\n        removeNodes(parent, old, 0, old.length);\r\n    else if (Array.isArray(old) && Array.isArray(vnodes)) {\r\n        if (old.length === vnodes.length && vnodeHasKey(vnodes[0])) {\r\n            for (let i = 0; i < old.length; i++) {\r\n                if (old[i] === vnodes[i] || old[i] == null && vnodes[i] == null)\r\n                    continue;\r\n                else if (old[i] == null)\r\n                    insertNode(parent, createNode(vnodes[i], eventNode, ns), getNextSibling(old, i + 1, nextSibling));\r\n                else if (vnodes[i] == null)\r\n                    removeNodes(parent, old, i, i + 1);\r\n                else\r\n                    updateNode(parent, old[i], vnodes[i], eventNode, getNextSibling(old, i + 1, nextSibling), ns);\r\n            }\r\n        }\r\n        else {\r\n            let oldStart = 0;\r\n            let start = 0;\r\n            let oldEnd = old.length - 1;\r\n            let end = vnodes.length - 1;\r\n            let map;\r\n            while (oldEnd >= oldStart && end >= start) {\r\n                let o = old[oldStart];\r\n                let v = vnodes[start];\r\n                if (o === v) {\r\n                    oldStart++;\r\n                    start++;\r\n                }\r\n                else if (o != null && v != null && o.key === v.key) {\r\n                    oldStart++;\r\n                    start++;\r\n                    updateNode(parent, o, v, eventNode, getNextSibling(old, oldStart, nextSibling), ns);\r\n                }\r\n                else {\r\n                    let o = old[oldEnd];\r\n                    if (o === v) {\r\n                        oldEnd--;\r\n                        start++;\r\n                    }\r\n                    else if (o != null && v != null && o.key === v.key) {\r\n                        updateNode(parent, o, v, eventNode, getNextSibling(old, oldEnd + 1, nextSibling), ns);\r\n                        if (start < end)\r\n                            insertNode(parent, toFragment(o), getNextSibling(old, oldStart, nextSibling));\r\n                        oldEnd--;\r\n                        start++;\r\n                    }\r\n                    else {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            while (oldEnd >= oldStart && end >= start) {\r\n                let o = old[oldEnd], v = vnodes[end];\r\n                if (o === v) {\r\n                    oldEnd--;\r\n                    end--;\r\n                }\r\n                else if (o != null && v != null && o.key === v.key) {\r\n                    updateNode(parent, o, v, eventNode, getNextSibling(old, oldEnd + 1, nextSibling), ns);\r\n                    if (o.dom != null) {\r\n                        nextSibling = o.dom;\r\n                    }\r\n                    oldEnd--;\r\n                    end--;\r\n                }\r\n                else {\r\n                    if (!map)\r\n                        map = getKeyMap(old, oldEnd);\r\n                    if (v != null) {\r\n                        let oldIndex = map[v.key];\r\n                        if (oldIndex != null) {\r\n                            let movable = old[oldIndex];\r\n                            updateNode(parent, movable, v, eventNode, getNextSibling(old, oldEnd + 1, nextSibling), ns);\r\n                            insertNode(parent, toFragment(movable), nextSibling)(old)[oldIndex].skip = true;\r\n                            if (movable.dom != null) {\r\n                                nextSibling = movable.dom;\r\n                            }\r\n                        }\r\n                        else {\r\n                            let dom = createNode(v, eventNode, undefined);\r\n                            insertNode(parent, dom, nextSibling);\r\n                            nextSibling = dom;\r\n                        }\r\n                    }\r\n                    end--;\r\n                }\r\n                if (end < start)\r\n                    break;\r\n            }\r\n            createNodes(parent, vnodes, start, end + 1, eventNode, nextSibling, ns);\r\n            removeNodes(parent, old, oldStart, oldEnd + 1);\r\n        }\r\n    }\r\n}\r\nfunction updateNode(parent, old, vnode, eventNode, nextSibling, ns) {\r\n    let oldTag = old.tag;\r\n    let tag = vnode.tag;\r\n    if (oldTag === tag && typeof oldTag === 'string') {\r\n        vnode.events = old.events;\r\n        switch (tag) {\r\n            case '#':\r\n                updateText(old, vnode);\r\n                break;\r\n            case '<':\r\n                updateHTML(parent, old, vnode, nextSibling);\r\n                break;\r\n            case '[':\r\n                updateFragment(parent, old, vnode, eventNode, nextSibling, ns);\r\n                break;\r\n            default: updateElement(old, vnode, eventNode, ns);\r\n        }\r\n    }\r\n    else if (old.data != null && typeof old.data.fn === 'function'\r\n        && vnode.data != null && typeof vnode.data.fn === 'function') {\r\n        updateThunk(parent, old, vnode, eventNode, nextSibling);\r\n    }\r\n    else if (typeof vnode.tagger === 'function' && typeof old.tagger === 'function') {\r\n        updateTagger(parent, old, vnode, eventNode, nextSibling);\r\n    }\r\n    else {\r\n        removeNode(parent, old);\r\n        insertNode(parent, createNode(vnode, eventNode, undefined), nextSibling);\r\n    }\r\n}\r\nfunction updateText(old, vnode) {\r\n    if (old.children.toString() !== vnode.children.toString()) {\r\n        old.dom.nodeValue = vnode.children;\r\n    }\r\n    vnode.dom = old.dom;\r\n}\r\nfunction updateHTML(parent, old, vnode, nextSibling) {\r\n    if (old.children !== vnode.children) {\r\n        toFragment(old);\r\n        insertNode(parent, createHTML(vnode), nextSibling);\r\n    }\r\n    else {\r\n        vnode.dom = old.dom;\r\n        vnode.domSize = old.domSize;\r\n    }\r\n}\r\nfunction updateFragment(parent, old, vnode, eventNode, nextSibling, ns) {\r\n    updateNodes(parent, old.children, vnode.children, eventNode, nextSibling, ns);\r\n    let domSize = 0;\r\n    let children = vnode.children;\r\n    vnode.dom = undefined;\r\n    if (children != null) {\r\n        for (let i = 0; i < children.length; ++i) {\r\n            let child = children[i];\r\n            if (child != null && child.dom != null) {\r\n                if (vnode.dom == null)\r\n                    vnode.dom = child.dom;\r\n                domSize += child.domSize || 1;\r\n            }\r\n        }\r\n        if (domSize !== 1)\r\n            vnode.domSize = domSize;\r\n    }\r\n}\r\nfunction updateElement(old, vnode, eventNode, ns) {\r\n    let element = vnode.dom = old.dom;\r\n    switch (vnode.tag) {\r\n        case 'svg':\r\n            ns = 'http://www.w3.org/2000/svg';\r\n            break;\r\n        case 'math':\r\n            ns = 'http://www.w3.org/1998/Math/MathML';\r\n            break;\r\n    }\r\n    if (vnode.tag === 'textarea') {\r\n        if (vnode.data == null)\r\n            vnode.data = {};\r\n        if (vnode.text != null)\r\n            vnode.data.value = vnode.text; //FIXME handle multiple children\r\n    }\r\n    updateAttrs(vnode, eventNode, old.data, vnode.data, ns);\r\n    if (old.text != null && vnode.text != null && vnode.text !== '') {\r\n        if (old.text.toString() !== vnode.text.toString())\r\n            old.dom.firstChild.nodeValue = vnode.text;\r\n    }\r\n    else {\r\n        if (old.text != null)\r\n            old.children = [new Vnode('#', undefined, undefined, old.text, undefined, old.dom.firstChild)];\r\n        if (vnode.text != null)\r\n            vnode.children = [new Vnode('#', undefined, undefined, vnode.text, undefined, undefined)];\r\n        updateNodes(element, old.children, vnode.children, eventNode, null, ns);\r\n    }\r\n}\r\nfunction updateThunk(parent, old, vnode, eventNode, nextSibling) {\r\n    if (vnode.compare(old.data, vnode.data)) {\r\n        vnode.node = old.node;\r\n        return;\r\n    }\r\n    let data = vnode.data;\r\n    // thunk args or the fn has beed changed\r\n    let node = Vnode.normalize(data.fn());\r\n    updateNode(parent, old.node, node, eventNode, nextSibling, undefined);\r\n    vnode.node = node;\r\n    vnode.dom = node.dom;\r\n    vnode.domSize = node.domSize;\r\n}\r\nfunction updateTagger(parent, old, vnode, eventNode, nextSibling) {\r\n    let { tagger, children } = getVnodeTagger(vnode);\r\n    let oldInfo = getVnodeTagger(old);\r\n    let nesting = tagger.length > 1 || oldInfo.tagger.length > 1;\r\n    if (nesting && oldInfo.tagger.length !== tagger.length) {\r\n        removeNode(parent, old);\r\n        insertNode(parent, createNode(vnode, eventNode, undefined), nextSibling);\r\n        return;\r\n    }\r\n    let subEventNode = {\r\n        tagger: tagger,\r\n        parent: eventNode\r\n    };\r\n    children = Vnode.normalize(children);\r\n    updateNode(parent, oldInfo.children, children, subEventNode, nextSibling, undefined);\r\n    vnode.dom = children.dom;\r\n    vnode.domSize = children.domSize;\r\n}\r\nfunction insertNode(parent, node, nextSibling) {\r\n    if (nextSibling && nextSibling.parentNode) {\r\n        parent.insertBefore(node, nextSibling);\r\n    }\r\n    else {\r\n        parent.appendChild(node);\r\n    }\r\n}\r\nfunction removeNodes(parent, vnodes, start, end) {\r\n    let vnode;\r\n    let i;\r\n    for (i = start; i < end; i++) {\r\n        vnode = vnodes[i];\r\n        if (vnode != null) {\r\n            if (vnode.skip)\r\n                vnode.skip = undefined;\r\n            removeNode(parent, vnode);\r\n        }\r\n    }\r\n}\r\nfunction removeNode(parent, vnode) {\r\n    let count;\r\n    let dom = vnode.dom;\r\n    if (dom) {\r\n        count = vnode.domSize || 1;\r\n        if (count > 1) {\r\n            while (--count) {\r\n                parent.removeChild(dom.nextSibling);\r\n            }\r\n        }\r\n        if (dom.parentNode != null)\r\n            parent.removeChild(dom);\r\n    }\r\n}\r\nfunction getKeyMap(vnodes, end) {\r\n    let map = {};\r\n    let vnode;\r\n    let key;\r\n    let i = 0;\r\n    for (i = 0; i < end; i++) {\r\n        vnode = vnodes[i];\r\n        if (vnode != null) {\r\n            key = vnode.key;\r\n            if (key != null)\r\n                map[key] = i;\r\n        }\r\n    }\r\n    return map;\r\n}\r\nfunction getVnodeTagger(vnode) {\r\n    if (typeof vnode.tagger === 'function') {\r\n        let tagger = [vnode.tagger];\r\n        let current = vnode.children[0];\r\n        while (typeof current.tagger === 'function') {\r\n            tagger = [current.tagger].concat(tagger);\r\n            if (Array.isArray(current.children) && current.children[0] != null) {\r\n                current = current.children[0];\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        return {\r\n            tagger: tagger,\r\n            children: current\r\n        };\r\n    }\r\n    else {\r\n        throw new Error('invalid vnode passed');\r\n    }\r\n}\r\nfunction setAttrs(vnode, eventNode, data, ns) {\r\n    for (let key in data) {\r\n        setAttr(vnode, eventNode, key, null, data[key], ns);\r\n    }\r\n}\r\nfunction updateAttrs(vnode, eventNode, old, data, ns) {\r\n    let key;\r\n    if (data != null) {\r\n        for (key in data) {\r\n            setAttr(vnode, eventNode, key, old && old[key], data[key], ns);\r\n        }\r\n    }\r\n    if (old != null) {\r\n        for (key in old) {\r\n            if (data == null || !(key in data)) {\r\n                if (key[0] === 'o' && key[1] === 'n')\r\n                    updateEvent(vnode, eventNode, key, undefined);\r\n                else if (key !== 'key')\r\n                    vnode.dom.removeAttribute(key);\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction setAttr(vnode, eventNode, key, old, value, ns) {\r\n    let element = vnode.dom;\r\n    if (key === 'key' || (old === value && !isFormAttribute(vnode, key))\r\n        && typeof value !== 'object' || typeof value === 'undefined') {\r\n        return;\r\n    }\r\n    let nsLastIndex = key.indexOf(':');\r\n    if (nsLastIndex > -1 && key.substr(0, nsLastIndex) === 'xlink') {\r\n        element.setAttributeNS('http://www.w3.org/1999/xlink', key.slice(nsLastIndex + 1), value);\r\n    }\r\n    else if (key[0] === 'o' && key[1] === 'n' && typeof value === 'function' || Array.isArray(value))\r\n        updateEvent(vnode, eventNode, key, value);\r\n    else if (key === 'style')\r\n        updateStyle(element, old, value);\r\n    else if (key === 'dataset')\r\n        updateDataset(element, old, value);\r\n    else if (key in element && !isAttribute(key) && ns === undefined) {\r\n        //setting input[value] to same value by typing on focused element moves cursor to end in Chrome\r\n        if (vnode.tag === 'input' && key === 'value' && element.value === value && vnode.dom === DOM.activeElement())\r\n            return;\r\n        element[key] = value;\r\n    }\r\n    else {\r\n        if (typeof value === 'boolean') {\r\n            if (value)\r\n                element.setAttribute(key, '');\r\n            else\r\n                element.removeAttribute(key);\r\n        }\r\n        else\r\n            element.setAttribute(key === 'className' ? 'class' : key, value);\r\n    }\r\n}\r\nfunction setLateAttrs(vnode, eventNode) {\r\n    let data = vnode.data;\r\n    if (typeof vnode.tag === 'string' && vnode.tag === 'select' && data != null) {\r\n        if ('value' in data)\r\n            setAttr(vnode, eventNode, 'value', null, data.value, undefined);\r\n        if ('selectedIndex' in data)\r\n            setAttr(vnode, eventNode, 'selectedIndex', null, data.selectedIndex, undefined);\r\n    }\r\n}\r\nfunction isFormAttribute(vnode, attr) {\r\n    return attr === 'value' || attr === 'checked' || attr === 'selectedIndex' || attr === 'selected' && vnode.dom === DOM.activeElement();\r\n}\r\nfunction isAttribute(attr) {\r\n    return attr === 'href' || attr === 'list' || attr === 'form'; // || attr === 'type' || attr === 'width' || attr === 'height'\r\n}\r\nfunction toFragment(vnode) {\r\n    let count = vnode.domSize;\r\n    if (count != null || vnode.dom == null) {\r\n        let fragment = DOM.createDocumentFragment();\r\n        if (count > 0) {\r\n            let dom = vnode.dom;\r\n            while (--count)\r\n                fragment.appendChild(dom.nextSibling);\r\n            fragment.insertBefore(dom, fragment.firstChild);\r\n        }\r\n        return fragment;\r\n    }\r\n    else\r\n        return vnode.dom;\r\n}\r\nfunction getNextSibling(vnodes, i, nextSibling) {\r\n    let vnode;\r\n    for (; i < vnodes.length; i++) {\r\n        vnode = vnodes[i];\r\n        if (vnode != null && vnode.dom != null)\r\n            return vnode.dom;\r\n    }\r\n    return nextSibling;\r\n}\r\n//style\r\nfunction updateStyle(element, old, style) {\r\n    if (old === style) {\r\n        element.style.cssText = '';\r\n        old = null;\r\n    }\r\n    if (style == null) {\r\n        element.style.cssText = '';\r\n    }\r\n    else if (typeof style === 'string') {\r\n        element.style.cssText = style;\r\n    }\r\n    else {\r\n        if (typeof old === 'string')\r\n            element.style.cssText = '';\r\n        for (let key in style) {\r\n            element.style[key] = style[key];\r\n        }\r\n        if (old != null && typeof old !== 'string') {\r\n            for (let key in old) {\r\n                if (!(key in style))\r\n                    element.style[key] = '';\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction updateDataset(element, old, dataset) {\r\n    if (!old && !dataset)\r\n        return;\r\n    let oldDataset = old || {};\r\n    let current = dataset || {};\r\n    let key;\r\n    for (key in oldDataset) {\r\n        if (!current[key]) {\r\n            delete element.dataset[key];\r\n        }\r\n    }\r\n    for (key in current) {\r\n        if (oldDataset[key] !== current[key]) {\r\n            element.dataset[key] = current[key];\r\n        }\r\n    }\r\n}\r\nfunction invokeArrayHandler(handler, dom, event) {\r\n    return handler.length === 2\r\n        ? handler[0].call(dom, handler[1], event)\r\n        : handler[0].apply(dom, handler.slice(1).concat(event));\r\n}\r\nfunction sendHtmlSignal(msg, eventNode) {\r\n    let currentEventNode = eventNode;\r\n    let tagger;\r\n    while (currentEventNode) {\r\n        tagger = currentEventNode.tagger;\r\n        if (Array.isArray(tagger)) {\r\n            for (let i = tagger.length; i--;) {\r\n                msg = tagger[i](msg);\r\n            }\r\n        }\r\n        else {\r\n            msg = tagger(msg);\r\n        }\r\n        if (currentEventNode.parent != null)\r\n            currentEventNode = currentEventNode.parent;\r\n        else\r\n            break;\r\n    }\r\n    return msg;\r\n}\r\n//event\r\nfunction updateEvent(vnode, eventNode, key, value) {\r\n    let element = vnode.dom;\r\n    function listener(event) {\r\n        if (typeof value === 'function' || Array.isArray(value)) {\r\n            let msg = Array.isArray(value) ? invokeArrayHandler(value, element, event) : value.call(element, event);\r\n            sendHtmlSignal(msg, eventNode);\r\n        }\r\n    }\r\n    if (key in element)\r\n        element[key] = listener;\r\n    else {\r\n        let eventName = key.slice(2);\r\n        if (vnode.events === undefined)\r\n            vnode.events = {};\r\n        if (vnode.events[eventName] != null)\r\n            element.removeEventListener(eventName, vnode.events[eventName], false);\r\n        else if (typeof value === 'function' || Array.isArray(value)) {\r\n            vnode.events[eventName] = listener;\r\n            element.addEventListener(eventName, vnode.events[eventName], false);\r\n        }\r\n    }\r\n}\r\nexport function render(eventNode) {\r\n    return function (dom, vnodes) {\r\n        let active = DOM.activeElement();\r\n        if (dom.vnodes == null)\r\n            dom.textContent = '';\r\n        if (!Array.isArray(vnodes))\r\n            vnodes = [vnodes];\r\n        updateNodes(dom, dom.vnodes, Vnode.normalizeChildren(vnodes), eventNode, null, undefined);\r\n        dom.vnodes = vnodes;\r\n        if (DOM.activeElement() !== active) {\r\n            active.focus();\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=render.js.map","import { render as renderService } from '../src/vdom/render';\r\nimport { h } from '../src/vdom/h';\r\nimport { Vnode } from '../src/vdom/vnode';\r\nfunction noop() { }\r\ndescribe('virtual dom', () => {\r\n    describe('dom attribute', () => {\r\n        let parent;\r\n        let render;\r\n        beforeEach(() => {\r\n            parent = document.createElement('div');\r\n            render = renderService({ tagger: noop, parent: null });\r\n        });\r\n        it('when input readonly is true, attribute is present', () => {\r\n            let vnode = h('input.input', { readonly: true });\r\n            render(parent, vnode);\r\n            expect(vnode.dom.attributes[\"readonly\"].nodeValue).toEqual('');\r\n        });\r\n        it('when input readonly is false, attribute not present', () => {\r\n            let vnode = h('input.input', { readonly: false });\r\n            render(parent, vnode);\r\n            expect(vnode.dom.attributes[\"readonly\"]).toBeUndefined();\r\n        });\r\n        it('when input checked is true, attribute is not present', () => {\r\n            let vnode = h('input.input', { checked: true });\r\n            render(parent, vnode);\r\n            expect(vnode.dom.checked).toEqual(true);\r\n            expect(vnode.dom.attributes['checked']).toBeUndefined();\r\n        });\r\n        it('when input checked is false, attribute is not present', () => {\r\n            let vnode = h('input.input', { checked: false });\r\n            render(parent, vnode);\r\n            expect(vnode.dom.checked).toEqual(false);\r\n            expect(vnode.dom.attributes['checked']).toBeUndefined();\r\n        });\r\n    });\r\n    describe('vnode text', () => {\r\n        let parent;\r\n        let render;\r\n        beforeEach(() => {\r\n            parent = document.createElement('div');\r\n            render = renderService({ tagger: noop, parent: null });\r\n        });\r\n        it('can render numeric like string', () => {\r\n            let vnode = new Vnode('#', undefined, undefined, '0', undefined, undefined);\r\n            render(parent, [vnode]);\r\n            expect(vnode.dom.nodeName === '#text' && vnode.dom.nodeValue === '0').toEqual(true);\r\n        });\r\n        it('can render empty string', () => {\r\n            let vnode = new Vnode('#', undefined, undefined, '', undefined, undefined);\r\n            render(parent, [vnode]);\r\n            expect(vnode.dom.nodeName === '#text' && vnode.dom.nodeValue === '').toEqual(true);\r\n        });\r\n        it('can render boolean', () => {\r\n            let vnode = new Vnode('#', undefined, undefined, 'true', undefined, undefined);\r\n            render(parent, [vnode]);\r\n            expect(vnode.dom.nodeName === '#text' && vnode.dom.nodeValue === 'true').toEqual(true);\r\n        });\r\n    });\r\n    describe('vdom event', () => {\r\n        let parent;\r\n        let render;\r\n        let clickHandler;\r\n        let tagger;\r\n        beforeEach(() => {\r\n            parent = document.createElement('div');\r\n            tagger = {\r\n                tagger: noop,\r\n                parent: null\r\n            };\r\n            spyOn(tagger, 'tagger');\r\n            render = renderService(tagger);\r\n            clickHandler = jasmine.createSpy('clickHandler').and.returnValue('msg');\r\n        });\r\n        it('handles onclick', () => {\r\n            let vdom = h('button', { onclick: clickHandler });\r\n            let event = document.createEvent(\"MouseEvents\");\r\n            event.initEvent('click', true, true);\r\n            render(parent, [vdom]);\r\n            vdom.dom.dispatchEvent(event);\r\n            expect(clickHandler).toHaveBeenCalledWith(event);\r\n            expect(tagger.tagger).toHaveBeenCalledWith('msg');\r\n        });\r\n        it('handle remove events', () => {\r\n            let vdom = h('button', { onclick: clickHandler });\r\n            let update = h('button', {});\r\n            let event = document.createEvent(\"MouseEvents\");\r\n            render(parent, [vdom]);\r\n            render(parent, [update]);\r\n            event.initEvent('click', true, true);\r\n            vdom.dom.dispatchEvent(event);\r\n            expect(clickHandler.calls.count()).toEqual(0);\r\n            expect(tagger.tagger.calls.count()).toEqual(0);\r\n        });\r\n        it('event handler array', () => {\r\n            let handler = jasmine.createSpy('arrayHandler');\r\n            let vdom = h('button', { onclick: [handler, 'foo'] });\r\n            let event = document.createEvent(\"MouseEvents\");\r\n            render(parent, [vdom]);\r\n            event.initEvent('click', true, true);\r\n            vdom.dom.dispatchEvent(event);\r\n            expect(handler).toHaveBeenCalledWith('foo', event);\r\n            expect(handler.calls.count()).toEqual(1);\r\n        });\r\n    });\r\n});\r\n//# sourceMappingURL=vdom_spec.js.map"],"names":["let","const","createElement","DOM.createTextNode","DOM.createElement","DOM.createDocumentFragment","DOM.createElementNS","o","v","DOM.activeElement","key","render","renderService"],"mappings":"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"}